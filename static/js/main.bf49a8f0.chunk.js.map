{"version":3,"sources":["components/Curve/curve.svg","components/Logo/meteorite.svg","components/Icon/svg/alarm.svg","components/Icon/svg/all_inbox.svg","components/Icon/svg/back.svg","components/Icon/svg/bolt.svg","components/Icon/svg/bolt-white.svg","components/Icon/svg/bookmark-alt.svg","components/Icon/svg/bookmark-alt-white.svg","components/Icon/svg/bookmark.svg","components/Icon/svg/bookmarks.svg","components/Icon/svg/check.svg","components/Icon/svg/clock.svg","components/Icon/svg/convo.svg","components/Icon/svg/done-all.svg","components/Icon/svg/done.svg","components/Icon/svg/hot.svg","components/Icon/svg/help.svg","components/Icon/svg/inbox.svg","components/Icon/svg/info.svg","components/Icon/svg/inbox-white.svg","components/Icon/svg/locked.svg","components/Icon/svg/low_priority.svg","components/Icon/svg/menu.svg","components/Icon/svg/next.svg","components/Icon/svg/people.svg","components/Icon/svg/people-white.svg","components/Icon/svg/people-alt.svg","components/Icon/svg/people-alt-white.svg","components/Icon/svg/prev.svg","components/Icon/svg/refresh.svg","components/Icon/svg/search.svg","components/Icon/svg/settings.svg","components/Icon/svg/star-alt.svg","components/Icon/svg/star.svg","components/Icon/svg/trash.svg","components/Icon/svg/timer.svg","components/Icon/svg/unlocked.svg","components/Icon/svg/undo.svg","components/Icon/svg/user.svg","components/Icon/svg/x.svg","components/Icon/svg/github/issue-closed.svg","components/Icon/svg/github/issue-open.svg","components/Icon/svg/github/pr-closed.svg","components/Icon/svg/github/pr-open.svg","components/Icon/svg/github/pr-merged.svg","components/LoadingIcon/loader.svg","components/LoadingIcon/loader-alt.svg","components/LoadingIcon/loader-white.svg","constants/routes.js","providers/Cookies.js","constants/cookies.js","providers/Auth.js","components/Curve/index.js","components/Logo/index.js","pages/Home/Scene.js","providers/Storage.js","pages/Home/index.js","constants/status.js","constants/reasons.js","providers/Notifications.js","constants/filters.js","components/Icon/index.js","components/LoadingIcon/index.js","enhance/index.js","pages/Notifications/SceneAlt.js","pages/Notifications/index.js","pages/Login/TokenHandler.js","components/buttons/AuthenticationButton.js","components/ErrorMessage.js","pages/Login/Scene.js","pages/Login/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","routes","HOME","NOTIFICATIONS","LOGIN","CookiesProvider","state","cookies","mapifyCookies","document","cookie","split","map","trim","reduce","cookiePair","_cookiePair$split","_cookiePair$split2","Object","slicedToArray","key","value","hydrateCookies","_this","setState","setCookie","name","concat","getCookie","removeCookie","moment","subtract","toString","this","props","children","objectSpread","React","Component","withCookiesProvider","WrappedComponent","react_default","a","createElement","Cookies_CookiesProvider","cookiesApi","assign","OAUTH_TOKEN_COOKIE","createContext","Provider","Consumer","withAuthProvider","authApi","AuthProviderWithCookies","token","setToken","invalidateToken","Curve","_ref","esm_extends","style","background","curve","position","bottom","left","transform","width","paddingBottom","backgroundSize","marginBottom","LoadingIcon","size","objectWithoutProperties","meteoriteSvg","height","Header","styled","color","padding","margin","letterSpacing","SubHeader","fontWeight","maxWidth","fontSize","LandingHeader","display","justifyContent","LandingMessage","flexDirection","textAlign","h1","SmallLink","textDecoration",":hover","SmallText","BottomLinkContainer","LinkButton","Scene","loggedIn","onLogout","className","alignItems","overflowX","es","marginRight","to","href","onClick","target","HomePage","enhance","compose","Status","QUEUED","STAGED","CLOSED","Reasons","MENTION","ASSIGN","REVIEW_REQUESTED","SUBSCRIBED","AUTHOR","OTHER","COMMENT","Badges","HOT","COMMENTS","OLD","LOCAL_STORAGE_PREFIX","LOCAL_STORAGE_STATISTIC_PREFIX","getMockNotification","randomNumber","id","updated_at","format","status","reasons","n","values","len","length","Array","fill","_","reason","Math","floor","random","time","getMockReasons","ceil","type","url","repository","number","repositoryUrl","mockNotifications","i","StorageProvider","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","loading","error","notifications","setTitle","title","indexOf","refreshNotifications","keys","window","localStorage","acc","cached_n","JSON","parse","getItem","push","getStat","stat","startTime","arguments","undefined","endTime","add","response","m","clone","isBefore","incrStat","oldValue","setItem","parseInt","stringify","e","removeItem","closed_cached_n","clearCache","clear","originalTitle","shouldUpdateTitle","_this2","onfocus","BASE_GITHUB_API_URL","cleanResponseUrl","replace","processHeadersAndBodyJson","entries","headers","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","_ref3","_ref2","err","return","rawLinks","links","forEach","section","Error","page","match","Promise","resolve","json","then","NotificationsProvider","requestPage","optimizePolling","Authorization","Content-Type","last_modified","fetch","method","_ref4","requestFetchNotifications","_ref5","nextPage","processNotificationsChunk","fetchNotifications","catch","finally","console","notificationsChunk","reject","log","everythingUpdated","getItemFromStorage","updateNotification","requestMarkAsRead","thread_id","warn","removeItemFromStorage","markAsRead","requestClearCache","clearStorageCache","requestStageThread","newValue","setItemInStorage","requestRestoreThread","stageThread","restoreThread","prevReason","newReason","isAuthor","some","r","subject","full_name","pop","nextProps","nextState","fetchNotificationsSync","withNotificationsProvider","_ref6","Storage_StorageProvider","_ref7","Notifications_NotificationsProvider","notificationsApi","Filters","ALL","PARTICIPATING","SvgIcon","icon","opacity","shrink","Icon","src","createIcon","Alarm","alarm","AllInbox","allInbox","Back","back","Bolt","bolt","BoltWhite","boltWhite","BookmarkAlt","bookmarkAlt","BookmarkAltWhite","bookmarkAltWhite","Bookmark","bookmark","Bookmarks","bookmarks","Check","check","Clock","clock","Convo","convo","DoneAll","doneAll","Done","Hot","hot","Help","help","Inbox","inbox","Info","info","InboxWhite","inboxWhite","Locked","locked","LowPriority","lowPriority","Menu","menu","Next","People","people","PeopleWhite","peopleWhite","PeopleAlt","peopleAlt","PeopleAltWhite","peopleAltWhite","Prev","prev","Refresh","refresh","Search","search","Settings","settings","StarAlt","starAlt","Star","star","Trash","trash","Timer","timer","Unlocked","unlocked","Undo","undo","User","user","X","x","IssueClosed","issue_closed","IssueOpen","issue_open","PrClosed","pr_closed","PrOpen","pr_open","PrMerged","pr_merged","alt","white","loader","loaderWhite","loaderAlt","Tooltip","getTooltipElement","querySelector","onMouseEnter","event","_this$props","tooltipOffsetX","tooltipOffsetY","_event$target$getBoun","getBoundingClientRect","y","text","createTextNode","message","tooltipElement","setAttribute","appendChild","timeout","setTimeout","onMouseLeave","clearTimeout","parentNode","removeChild","defaultProps","withTooltip","tooltip","enhance_Tooltip","mouseEvents","FixedContainer","InlineBlockContainer","div","NotificationsContainer","boxSizing","NavigationContainer","top","paddingTop","zIndex","GeneralOptionsContainer","minHeight","flex","button","Sidebar","paddingRight","SidebarLink","active","userSelect","cursor","borderRadius","textTransform","transition",":before","content","right",":hover:before",":active:before","Notifications","NavTab","paddingLeft",":after","verticalAlign","marginLeft","borderTopLeftRadius","borderTopRightRadius","Tab","border","outline","disabled","SearchField","float","boxShadow",":focus-within","Message","marginTop","LoaderContainer","SearchInput",":focus","EnhancedSearchInput","onEnter","onKeyPress","NotificationRow","NotificationTab","Timestamp","NotificationTitle","img","::before","Repository","PRIssue","after","Table","minWidth","td","TableItem","whiteSpace","overflow","textOverflow","lineHeight","EnhancedTab","EnhancedNavTab","EnhancedNotificationTab","EnhancedSidebarLink","EnhancedIconHot","EnhancedIconTimer","EnhancedIconConvo","_ref8","queuedCount","stagedCount","closedCount","first","last","lastPage","query","activeStatus","allNotificationsCount","stagedTodayCount","onChangePage","onSetActiveStatus","onClearQuery","onSearch","onMarkAsRead","onFetchNotifications","onStageThread","onRefreshNotifications","onRestoreThread","isSearching","isFetchingNotifications","onClearCache","activeFilter","fetchingNotificationsError","onSetActiveFilter","isFirstPage","isLastPage","placeholder","LoadingIcon_LoadingIcon","SceneAlt_SmallLink","confirm","Fragment","toLowerCase","role","aria-label","getPRIssueIcon","open","currentTime","targetTime","diffMinutes","diff","diffDays","getRelativeTime","badges","badge","score","scoreOfReason","_scoreOfReason","defineProperty","decorateWithScore","notification","degradedScore","max","scoreOf","timeSinceLastUpdate","oldestReference","badgesOf","NotificationsPage","currentPage","filter","enhancedOnStageThread","storageApi","syncer","setInterval","clearInterval","_this3","noThrow","_this$props$notificat","filterMethod","filteredNotifications","notificationsQueued","notificationsStaged","notificationsClosed","notificationsToRender","scoredAndSortedNotifications","sort","b","firstIndex","lastIndex","notificationsOnPage","slice","firstNumbered","lastNumbered","min","SceneAlt_Scene","TokenHandler","code","qs","location","onSetLoading","onSetError","AuthenticationButton","ErrorMessage","ErrorMessage_Message","Container","ButtonsContainer","loggedOut","buttons_AuthenticationButton","LoginPage","TokenHandler_TokenHandler","Scene_Scene","App","Home","path","Login","pages_Notifications","Boolean","hostname","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"mHAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,mDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,uDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,mDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,uDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,gECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,sDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,uDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,mDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,mDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,mDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,sDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,iDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,mDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,yDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,oDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,oDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,0DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,8DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,qDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,oDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,sDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,sDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,kDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,mDCAxCH,EAAAC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","file":"static/js/main.bf49a8f0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/curve.8317a901.svg\";","module.exports = __webpack_public_path__ + \"static/media/meteorite.bd106e32.svg\";","module.exports = __webpack_public_path__ + \"static/media/alarm.1f9a1e97.svg\";","module.exports = __webpack_public_path__ + \"static/media/all_inbox.07afdca7.svg\";","module.exports = __webpack_public_path__ + \"static/media/back.ac944051.svg\";","module.exports = __webpack_public_path__ + \"static/media/bolt.5af80b74.svg\";","module.exports = __webpack_public_path__ + \"static/media/bolt-white.f705bc3d.svg\";","module.exports = __webpack_public_path__ + \"static/media/bookmark-alt.3f1c7930.svg\";","module.exports = __webpack_public_path__ + \"static/media/bookmark-alt-white.43981eb1.svg\";","module.exports = __webpack_public_path__ + \"static/media/bookmark.84162454.svg\";","module.exports = __webpack_public_path__ + \"static/media/bookmarks.dafc5a09.svg\";","module.exports = __webpack_public_path__ + \"static/media/check.235701a7.svg\";","module.exports = __webpack_public_path__ + \"static/media/clock.f704b852.svg\";","module.exports = __webpack_public_path__ + \"static/media/convo.3237a8b6.svg\";","module.exports = __webpack_public_path__ + \"static/media/done-all.063fa933.svg\";","module.exports = __webpack_public_path__ + \"static/media/done.e249914e.svg\";","module.exports = __webpack_public_path__ + \"static/media/hot.83e346c1.svg\";","module.exports = __webpack_public_path__ + \"static/media/help.af2f5bd3.svg\";","module.exports = __webpack_public_path__ + \"static/media/inbox.5773ced0.svg\";","module.exports = __webpack_public_path__ + \"static/media/info.7d03c90c.svg\";","module.exports = __webpack_public_path__ + \"static/media/inbox-white.33ab9f01.svg\";","module.exports = __webpack_public_path__ + \"static/media/locked.6e97143e.svg\";","module.exports = __webpack_public_path__ + \"static/media/low_priority.d335a12d.svg\";","module.exports = __webpack_public_path__ + \"static/media/menu.1e899223.svg\";","module.exports = __webpack_public_path__ + \"static/media/next.b6b6c4db.svg\";","module.exports = __webpack_public_path__ + \"static/media/people.a1a1234d.svg\";","module.exports = __webpack_public_path__ + \"static/media/people-white.021c4869.svg\";","module.exports = __webpack_public_path__ + \"static/media/people-alt.dab4fe40.svg\";","module.exports = __webpack_public_path__ + \"static/media/people-alt-white.82f1df7b.svg\";","module.exports = __webpack_public_path__ + \"static/media/prev.7e77da69.svg\";","module.exports = __webpack_public_path__ + \"static/media/refresh.fbf012c9.svg\";","module.exports = __webpack_public_path__ + \"static/media/search.a87eca9e.svg\";","module.exports = __webpack_public_path__ + \"static/media/settings.674d9d35.svg\";","module.exports = __webpack_public_path__ + \"static/media/star-alt.f02a9cc4.svg\";","module.exports = __webpack_public_path__ + \"static/media/star.d0367478.svg\";","module.exports = __webpack_public_path__ + \"static/media/trash.30e9677a.svg\";","module.exports = __webpack_public_path__ + \"static/media/timer.3d7813e9.svg\";","module.exports = __webpack_public_path__ + \"static/media/unlocked.ba846a91.svg\";","module.exports = __webpack_public_path__ + \"static/media/undo.42f85826.svg\";","module.exports = __webpack_public_path__ + \"static/media/user.f322cb5a.svg\";","module.exports = __webpack_public_path__ + \"static/media/x.777b93c6.svg\";","module.exports = __webpack_public_path__ + \"static/media/issue-closed.5f7eef90.svg\";","module.exports = __webpack_public_path__ + \"static/media/issue-open.8de00201.svg\";","module.exports = __webpack_public_path__ + \"static/media/pr-closed.1c246004.svg\";","module.exports = __webpack_public_path__ + \"static/media/pr-open.a18f5c9f.svg\";","module.exports = __webpack_public_path__ + \"static/media/pr-merged.560fc2b8.svg\";","module.exports = __webpack_public_path__ + \"static/media/loader.90c5baad.svg\";","module.exports = __webpack_public_path__ + \"static/media/loader-alt.1b67c2ce.svg\";","module.exports = __webpack_public_path__ + \"static/media/loader-white.15dd7fce.svg\";","export default {\n  HOME: '/',\n  NOTIFICATIONS: 'notifications',\n  LOGIN: 'login'\n};\n","import React from 'react';\nimport moment from 'moment';\n\nclass CookiesProvider extends React.Component {\n  state = {\n    cookies: {}\n  }\n\n  componentWillMount () {\n    this.hydrateCookies();\n  }\n\n  mapifyCookies = () => {\n    const cookiesPairs = document.cookie.split(';').map(cookie => cookie.trim());\n    const cookies = cookiesPairs.reduce((map, cookiePair) => {\n      const [key, value] = cookiePair.split('=');\n      map[key] = value;\n      return map;\n    }, {});\n    return cookies;\n  }\n\n  hydrateCookies = () => {\n    const cookies = this.mapifyCookies();\n    this.setState({ cookies });\n  }\n\n  setCookie = (name, value) => {\n    document.cookie = `${name}=${value}`;\n    this.hydrateCookies()\n  }\n\n  getCookie = name => {\n    return this.state.cookies[name];\n  }\n\n  removeCookie = name => {\n    document.cookie = `${name}=''; expires=${moment().subtract(1, 'day').toString()}`;\n    this.hydrateCookies();\n  }\n\n  render () {\n    return this.props.children({\n      ...this.state,\n      setCookie: this.setCookie,\n      getCookie: this.getCookie,\n      removeCookie: this.removeCookie\n    });\n  }\n}\n\nconst withCookiesProvider = WrappedComponent => props => (\n  <CookiesProvider>\n    {cookiesApi => <WrappedComponent {...props} cookiesApi={cookiesApi} />}\n  </CookiesProvider>\n);\n\nexport {\n  CookiesProvider,\n  withCookiesProvider\n};\n","export const OAUTH_TOKEN_COOKIE = 'meteorite-oauth-token';\n","import React from 'react';\nimport { withCookiesProvider } from './Cookies';\nimport { OAUTH_TOKEN_COOKIE } from '../constants/cookies';\n\nconst {Provider, Consumer} = React.createContext('foo');\n\nclass AuthProvider extends React.Component {\n  state = {\n    token: this.props.cookiesApi.getCookie(OAUTH_TOKEN_COOKIE)\n  }\n\n  setToken = token => {\n    this.props.cookiesApi.setCookie(OAUTH_TOKEN_COOKIE, token);\n    this.setState({ token });\n  }\n\n  invalidateToken = () => {\n    this.setState({ token: null });\n  }\n\n  render () {\n    return (\n      <Provider value={{\n        token: this.state.token,\n        setToken: this.setToken,\n        invalidateToken: this.invalidateToken\n      }}>\n        {this.props.children}\n      </Provider>\n    );\n  }\n}\n\nconst withAuthProvider = WrappedComponent => props => (\n  <Consumer>\n    {authApi => <WrappedComponent {...props} authApi={authApi} />}\n  </Consumer>\n);\n\nconst AuthProviderWithCookies = withCookiesProvider(AuthProvider);\n\nexport {\n  AuthProviderWithCookies as AuthProvider,\n  Consumer as AuthConsumer,\n  withAuthProvider\n};\n","import React from 'react';\nimport curve from './curve.svg';\n\nexport default function Curve ({ ...props }) {\n  return (\n    <div style={{\n      background: `url(${curve}) center bottom`,\n      position: 'absolute',\n      bottom: '0',\n      left: '50%',\n      transform: 'translateX(-50%)',\n      width: '190vw',\n      paddingBottom: '4.5%',\n      backgroundSize: 'cover',\n      marginBottom: '-1px'\n    }} />\n  );\n}\n","import React from 'react';\nimport meteoriteSvg from './meteorite.svg';\n// import meteoritePng from './meteorite-v2-2.png';\n\nexport default function LoadingIcon ({ style, size, ...props }) {\n  return (\n    <div style={{\n      background: `url(${meteoriteSvg}) center center no-repeat`,\n      backgroundSize: 'contain',\n      // transform: 'rotate(180deg)',\n      position: 'relative',\n      height: size,\n      width: size,\n      ...style\n    }} {...props} />\n  );\n}\n","import React from 'react';\nimport { Link as RouterLink } from \"@reach/router\";\nimport styled from 'react-emotion';\nimport { routes } from '../../constants';\nimport Curve from '../../components/Curve';\nimport Logo from '../../components/Logo';\nimport '../../styles/gradient.css';\n\nconst Header = styled('h1')({\n  color: '#fff',\n  padding: '0 20px',\n  margin: '0 auto 20px',\n  letterSpacing: '-1.0px'\n});\n\nconst SubHeader = styled(Header)({\n  fontWeight: 500,\n  maxWidth: 460,\n  color: '#fff',\n  fontSize: 24,\n  marginBottom: 30,\n  letterSpacing: '-0.25px'\n});\n\nconst LandingHeader = styled('div')({\n  width: '100%',\n  margin: '54px 20px',\n  maxWidth: 1000,\n  display: 'flex',\n  justifyContent: 'space-between',\n});\n\nconst LandingMessage = styled(LandingHeader)({\n  flexDirection: 'column',\n  textAlign: 'center',\n  maxWidth: 1000,\n  'h1': {\n    display: 'block'\n  }\n});\n\nconst SmallLink = styled('a')({\n  fontSize: '12px',\n  fontWeight: '700',\n  color: '#ffffff',\n  textDecoration: 'none',\n  ':hover': {\n    textDecoration: 'underline'\n  }\n});\n\nconst SmallText = styled('span')({\n  fontSize: '12px',\n  fontWeight: '500',\n  color: '#ffffff',\n});\n\nconst BottomLinkContainer = styled(LandingHeader)({\n  maxWidth: 390,\n  width: '100%',\n  margin: '32px auto 0',\n});\n\nconst LinkButton = styled('a')({});\n\nexport default function Scene ({loggedIn, onLogout, ...props}) {\n  return (\n    <div className=\"container-gradient\" style={{\n      width: '100%',\n      height: 600,\n      position: 'relative',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      overflowX: 'hidden'\n    }}>\n      <LandingHeader>\n        <Logo size={75} />\n        {loggedIn ? (\n          <div className=\"button-container\">\n            <RouterLink style={{marginRight: 15}} to={routes.NOTIFICATIONS}>notifications</RouterLink>\n            <LinkButton style={{marginRight: 15}} href=\"#\" onClick={onLogout}>sign out</LinkButton>\n          </div>\n        ) : (\n          <div className=\"button-container\">\n            <RouterLink style={{marginRight: 15}} to={routes.LOGIN}>sign in</RouterLink>\n          </div>\n        )}\n      </LandingHeader>\n      <LandingMessage>\n        <Header>Control your notifications</Header>\n        <SubHeader>Prioritize the tasks that keep you and your team most productive</SubHeader>\n        <div className=\"button-container\">\n          <RouterLink to={routes.LOGIN}>let's get started</RouterLink>\n        </div>\n        <BottomLinkContainer>\n          <SmallLink target=\"_blank\" href=\"https://github.com/nickzuber/meteorite\">View and contribute on GitHub</SmallLink>\n          <SmallText>Totally free and open sourced</SmallText>\n        </BottomLinkContainer>\n      </LandingMessage>\n      <Curve />\n    </div>\n  );\n};\n","import React from 'react';\nimport moment from 'moment';\nimport {Status} from '../constants/status';\nimport {Reasons} from '../constants/reasons';\n\nconst LOCAL_STORAGE_PREFIX = '__meteorite_noti_cache__';\nconst LOCAL_STORAGE_STATISTIC_PREFIX = '__meteorite_statistic_cache__';\n\nconst getMockReasons = n => {\n  const reasons = Object.values(Reasons);\n  const len = reasons.length;\n  return new Array(n).fill(0).map(_ => ({\n    reason: reasons[Math.floor(Math.random() * len)],\n    time: moment().format()\n  }));\n};\n\nconst getMockNotification = randomNumber => ({\n  id: randomNumber,\n  updated_at: moment().format(),\n  status: (randomNumber > 0.8 ? Status.STAGED : Status.QUEUED),\n  reasons: getMockReasons(Math.ceil(randomNumber * 10)),\n  type: ['Issue', 'PullRequest'][Math.floor(randomNumber * 2)],\n  name: 'Mock - Fake notification name',\n  url: 'https://github.com/test/repo/pull',\n  repository: 'test/mock',\n  number: Math.ceil(randomNumber * 1000),\n  repositoryUrl: 'https://github.com/test/repo',\n});\n\nconst mockNotifications = new Array(1000);\nfor (let i = 0; i < mockNotifications.length; i++) {\n  mockNotifications[i] = getMockNotification(Math.random());\n}\n\nclass StorageProvider extends React.Component {\n  constructor (props) {\n    super(props);\n\n    this.originalTitle = document.title;\n    this.shouldUpdateTitle = false;\n  }\n\n  state = {\n    loading: false,\n    error: null,\n    notifications: []\n  }\n\n  componentWillMount () {\n    this.refreshNotifications();\n  }\n\n  componentDidMount () {\n    window.onfocus = () => this.setTitle(this.originalTitle);\n  }\n\n  setTitle = title => {\n    if (document.title.indexOf('(1)') === -1 && document.title !== title) {\n      document.title = title;\n    }\n  }\n\n  /**\n   * Loads up the notifications state with the cache.\n   */\n  refreshNotifications = () => {\n    const notifications = Object.keys(window.localStorage).reduce((acc, key) => {\n      if (key.indexOf(LOCAL_STORAGE_PREFIX) > -1) {\n        const cached_n = JSON.parse(window.localStorage.getItem(key));\n        acc.push(cached_n);\n      }\n      return acc;\n    }, []);\n\n    // @TODO fix this\n    // Document is out of focus, the we had notifications before this update,\n    // and there was a change in notifications in the most recent update.\n    // if (!document.hasFocus() &&\n    //     this.state.notifications.length > 0 &&\n    //     notifications.length !== this.state.notifications.length\n    // ) {\n    //   this.setTitle('(1) ' + this.originalTitle);\n    // } else {\n    //   this.setTitle(this.originalTitle);\n    // }\n\n    this.setState({ notifications });\n    // this.setState({ notifications: mockNotifications });\n  }\n\n  /**\n   * Stats are broken up since they are fetched and set often, we want to avoid\n   * the JSON parsing overhead.\n   *\n   * Our statistics are indexed by the date (current unique day) we had recorded it.\n   * This _does_ limit us by making this choice - the most granular we can get with\n   * statistics is by day. This is an intentional design decision and we could always\n   * change it later at some point if we really wanted to.\n   *\n   * Statistics take the form __DATE-NAME. For example:\n   * ```\n   *  __meteorite_noti_cache__2018-11-05-robin-extension-staged -> 52\n   *  __meteorite_noti_cache__2018-11-06-robin-dashboard-staged -> 4\n   * ```\n   */\n  getStat = (stat, startTime = moment(), endTime = moment().add(1, 'day')) => {\n    const response = [];\n\n    // Range reflects `[start, end)`\n    for (let m = startTime.clone(); m.isBefore(endTime); m.add(1, 'day')) {\n      const key = m.format('YYYY-MM-DD');\n      const value = window.localStorage.getItem(`${LOCAL_STORAGE_STATISTIC_PREFIX}${key}-${stat}`);\n      if (value !== null) {\n        response.push(value);\n      }\n    }\n    return response;\n  }\n\n  /**\n   * Since our stats right now are just numbers, we can assume \"setting\" will always\n   * increment. This is a pretty bold assumption that makes things simpler for now,\n   * so we're going to go with it for the time being.\n   */\n  incrStat = (stat, time = moment()) => {\n    const key = time.format('YYYY-MM-DD');\n    const oldValue = window.localStorage.getItem(`${LOCAL_STORAGE_STATISTIC_PREFIX}${key}-${stat}`);\n    if (oldValue !== null) {\n      window.localStorage.setItem(`${LOCAL_STORAGE_STATISTIC_PREFIX}${key}-${stat}`, parseInt(oldValue, 10) + 1);\n    } else {\n      window.localStorage.setItem(`${LOCAL_STORAGE_STATISTIC_PREFIX}${key}-${stat}`, 1);\n    }\n  }\n\n  // val value : Object\n  setItem = (id, value) => {\n    window.localStorage.setItem(`${LOCAL_STORAGE_PREFIX}${id}`, JSON.stringify(value));\n  }\n\n  getItem = id => {\n    try {\n      return JSON.parse(window.localStorage.getItem(`${LOCAL_STORAGE_PREFIX}${id}`));\n    } catch (e) {\n      return null;\n    }\n  }\n\n  removeItem = id => {\n    // We never really want to purge anything from the cache if we can help it,\n    // since there's always a chance that a read notification can be resurrected.\n    // Instead, let's \"remove\" a thread by closing it.\n    //\n    // window.localStorage.removeItem(`${LOCAL_STORAGE_PREFIX}${id}`);\n    const cached_n = this.getItem(id);\n    const closed_cached_n = {\n      ...cached_n,\n      status: Status.CLOSED\n    };\n    this.setItem(id, closed_cached_n);\n  }\n\n  clearCache = () => {\n    window.localStorage.clear();\n  }\n\n  render () {\n    return this.props.children({\n      ...this.state,\n      setItem: this.setItem,\n      getItem: this.getItem,\n      removeItem: this.removeItem,\n      clearCache: this.clearCache,\n      refreshNotifications: this.refreshNotifications,\n      getStat: this.getStat,\n      incrStat: this.incrStat,\n    });\n  }\n}\n\nconst withStorageProvider = WrappedComponent => props => (\n  <StorageProvider>\n    {(storageApi) => (\n      <WrappedComponent {...props} storageApi={storageApi} />\n    )}\n  </StorageProvider>\n);\n\nexport {\n  StorageProvider,\n  withStorageProvider\n};\n","import React from 'react';\nimport { compose } from 'recompose';\nimport { withAuthProvider } from '../../providers/Auth';\nimport { withCookiesProvider } from '../../providers/Cookies';\nimport { OAUTH_TOKEN_COOKIE } from '../../constants/cookies';\nimport Scene from './Scene';\n\nclass HomePage extends React.Component {\n  onLogout = () => {\n    // Remove cookie and invalidate token on client.\n    this.props.cookiesApi.removeCookie(OAUTH_TOKEN_COOKIE);\n    this.props.authApi.invalidateToken();\n  }\n\n  render () {\n    return (\n      <Scene\n        loggedIn={!!this.props.authApi.token}\n        onLogout={this.onLogout}\n      />\n    );\n  }\n};\n\nconst enhance = compose(\n  withAuthProvider,\n  withCookiesProvider\n);\n\nexport default enhance(HomePage);\n","export const Status = {\n  QUEUED: 'queued',\n  STAGED: 'staged',\n  CLOSED: 'closed'\n};\n","export const Reasons = {\n  MENTION: 'mention',\n  ASSIGN: 'assign',\n  REVIEW_REQUESTED: 'review_requested',\n  SUBSCRIBED: 'subscribed',\n  AUTHOR: 'author',\n  OTHER: 'other',\n  COMMENT: 'comment',\n};\n\nexport const Badges = {\n  HOT: 'hot',\n  COMMENTS: 'comments',\n  OLD: 'old'\n};\n","import React from 'react';\nimport {AuthConsumer} from './Auth';\nimport {StorageProvider} from './Storage';\nimport {Status} from '../constants/status';\n\nconst BASE_GITHUB_API_URL = 'https://api.github.com';\n\nfunction cleanResponseUrl (url) {\n  return url\n    .replace('api.github.com', 'github.com')\n    .replace('/repos/', '/')\n    .replace('/pulls/', '/pull/');\n}\n\nfunction processHeadersAndBodyJson (response) {\n  const entries = response.headers.entries();\n  const headers = {};\n  for (let [name, value] of entries) {\n    headers[name] = value;\n  }\n\n  const rawLinks = headers['link'];\n  const links = {};\n\n  if (rawLinks) {\n    rawLinks.split(',').forEach((p) => {\n      const section = p.split(';');\n      if (section.length !== 2) {\n        throw new Error(\"section could not be split on ';'\");\n      }\n      const url = section[0].replace(/<(.*)>/, '$1').trim();\n      const page = section[0].match(/page=(\\d)/)[1];\n      const name = section[1].replace(/rel=\"(.*)\"/, '$1').trim();\n      links[name] = {url, page};\n    })\n  }\n  // links.next.page\n  headers['link'] = links;\n\n  // 304 will usually mean nothing has changed from our last fetch.\n  if (response.status === 304) {\n    return Promise.resolve({\n      headers,\n      json: null\n    });\n  }\n\n  return response.json().then(json => ({\n    headers,\n    json\n  }));\n}\n\nclass NotificationsProvider extends React.Component {\n  constructor (props) {\n    super(props);\n\n    this.last_modified = null;\n  }\n\n  state = {\n    loading: false,\n    error: null\n  }\n\n  shouldComponentUpdate (nextProps, nextState) {\n    // Update if our state changes.\n    if ((this.state.loading !== nextState.loading) ||\n        (this.state.error !== nextState.error)) {\n      return true;\n    }\n    // Update if the token changes at all (sign in & sign out).\n    if (this.props.token !== nextProps.token) {\n      return true;\n    }\n    // Only update if our notifications prop changes.\n    // All other props \"changing\" should NOT trigger a rerender.\n    return this.props.notifications !== nextProps.notifications;\n  }\n\n  requestPage = (page = 1, optimizePolling = true) => {\n    const headers = {\n      'Authorization': `token ${this.props.token}`,\n      'Content-Type': 'application/json',\n    };\n\n    if (optimizePolling && this.last_modified) {\n      headers['If-Modified-Since'] = this.last_modified;\n    }\n\n    return fetch(`${BASE_GITHUB_API_URL}/notifications?page=${page}`, {\n      method: 'GET',\n      headers: headers\n    })\n      .then(processHeadersAndBodyJson)\n      .then(({headers, json}) => {\n        // If there were updates, make sure we get the newest last-modified.\n        if (headers['last-modified']) {\n          this.last_modified = headers['last-modified'];\n        }\n\n        return {\n          headers,\n          json\n        };\n      });\n  }\n\n  requestFetchNotifications = (page = 1, optimizePolling = true) => {\n    return this.requestPage(page, optimizePolling)\n      .then(({headers, json}) => {\n        if (json === null) return;\n        let nextPage = null;\n        const links = headers['link'];\n        if (links && links.next && links.next.page) {\n          nextPage = links.next.page;\n        }\n        return this.processNotificationsChunk(nextPage, json);\n      });\n  }\n\n  fetchNotifications = (page = 1, optimizePolling = true) => {\n    if (!this.props.token) {\n      console.error('Unauthenitcated, aborting request.')\n      return false;\n    }\n\n    this.setState({ loading: true });\n    return this.requestFetchNotifications(page, optimizePolling)\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ loading: false }));\n  }\n\n  processNotificationsChunk = (nextPage, notificationsChunk) => {\n    return new Promise((resolve, reject) => {\n      console.log('chunk', notificationsChunk)\n      let everythingUpdated = true;\n\n      if (notificationsChunk.length === 0) {\n        // Apparently this means that a user has no notifications (makes sense).\n        // So I guess we should purge our cache? This brings up the great point\n        // of us having stale cache. How can we detect that a notifcation was seen?\n      }\n\n      notificationsChunk.forEach(n => {\n        const cached_n = this.props.getItemFromStorage(n.id);\n        // If we've seen this notification before.\n        if (cached_n) {\n          // Something's changed, we want to push\n          if (cached_n.updated_at !== n.updated_at) {\n            this.updateNotification(n, cached_n.reasons);\n            return;\n          }\n          // This means that something didn't update, which means the page we're\n          // currently processing has stale data so we don't need to fetch the next page.\n          everythingUpdated = false;\n        } else {\n          // Else, update the cache.\n          this.updateNotification(n);\n        }\n      });\n\n      if (nextPage && everythingUpdated) {\n        // Still need to fetch more updates.\n        this.fetchNotifications(nextPage, false);\n      } else {\n        // All done fetching updates, let's trigger a sync.\n        this.props.refreshNotifications();\n        resolve();\n      }\n    });\n  }\n\n  requestMarkAsRead = thread_id => {\n    const headers = {\n      'Authorization': `token ${this.props.token}`,\n      'Content-Type': 'application/json',\n    };\n\n    return fetch(`${BASE_GITHUB_API_URL}/notifications/threads/${thread_id}`, {\n      method: 'PATCH',\n      headers: headers\n    })\n      .then(response => {\n        return response.status === 205\n          ? Promise.resolve()\n          : Promise.reject();\n      })\n      .then(() => {\n        console.warn('removing', thread_id);\n        this.props.removeItemFromStorage(thread_id);\n        this.props.refreshNotifications();\n        return Promise.resolve();\n      });\n  }\n\n  markAsRead = thread_id => {\n    if (!this.props.token) {\n      console.error('Unauthenitcated, aborting request.')\n      return false;\n    }\n\n    this.setState({ loading: true });\n    return this.requestMarkAsRead(thread_id)\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ loading: false }));\n  }\n\n  requestClearCache = () => {\n    return new Promise((resolve, reject) => {\n      console.warn('clearing cache');\n      this.props.clearStorageCache();\n      this.props.refreshNotifications();\n      this.last_modified = null;\n      return resolve();\n    });\n  }\n\n  clearCache = () => {\n    this.setState({ loading: true });\n    return this.requestClearCache()\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ loading: false }));\n  }\n\n  requestStageThread = thread_id => {\n    return new Promise((resolve, reject) => {\n      console.warn('staging thread', thread_id);\n      const cached_n = this.props.getItemFromStorage(thread_id);\n      if (cached_n) {\n        const newValue = {\n          ...cached_n,\n          status: Status.STAGED\n        };\n        this.props.setItemInStorage(thread_id, newValue);\n        this.props.refreshNotifications();\n        return resolve();\n      } else {\n        throw new Error(`Attempted to stage thread ${thread_id} that wasn't found in the cache.`);\n      }\n    });\n  }\n\n  requestRestoreThread = thread_id => {\n    return new Promise((resolve, reject) => {\n      console.warn('restoring thread', thread_id);\n      const cached_n = this.props.getItemFromStorage(thread_id);\n      if (cached_n) {\n        const newValue = {\n          ...cached_n,\n          status: Status.QUEUED\n        };\n        this.props.setItemInStorage(thread_id, newValue);\n        this.props.refreshNotifications();\n        return resolve();\n      } else {\n        throw new Error(`Attempted to restore thread ${thread_id} that wasn't found in the cache.`);\n      }\n    });\n  }\n\n  stageThread = thread_id => {\n    this.setState({ loading: true });\n    return this.requestStageThread(thread_id)\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ loading: false }));\n  }\n\n  restoreThread = thread_id => {\n    this.setState({ loading: true });\n    return this.requestRestoreThread(thread_id)\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ loading: false }));\n  }\n\n  updateNotification = (n, prevReason = null) => {\n    let reasons = [];\n    const newReason = {\n      reason: n.reason,\n      time: n.updated_at\n    }\n\n    if (prevReason) {\n      reasons = prevReason.concat(newReason);\n      console.warn('MULTIPLE REASONS', reasons)\n    } else {\n      reasons = [newReason];\n    }\n\n    // Notification model\n    const value = {\n      id: n.id,\n      isAuthor: reasons.some(r => r.reason === 'author'),\n      updated_at: n.updated_at,\n      status: Status.QUEUED,\n      reasons: reasons,\n      type: n.subject.type,\n      name: n.subject.title,\n      url: cleanResponseUrl(n.subject.url),\n      repository: n.repository.full_name,\n      number: n.subject.url.split('/').pop(),\n      repositoryUrl: cleanResponseUrl(n.repository.url)\n    };\n    this.props.setItemInStorage(n.id, value);\n  }\n\n  render () {\n    return this.props.children({\n      ...this.state,\n      notifications: this.props.notifications,\n      fetchNotifications: this.fetchNotifications,\n      fetchNotificationsSync: this.requestFetchNotifications,\n      markAsRead: this.markAsRead,\n      clearCache: this.clearCache,\n      stageThread: this.stageThread,\n      restoreThread: this.restoreThread,\n    });\n  }\n}\n\nconst withNotificationsProvider = WrappedComponent => props => (\n  <AuthConsumer>\n    {({ token }) => (\n      <StorageProvider>\n        {({\n          refreshNotifications,\n          notifications,\n          getItem,\n          setItem,\n          clearCache,\n          removeItem\n        }) => (\n          <NotificationsProvider\n            refreshNotifications={refreshNotifications}\n            notifications={notifications}\n            getItemFromStorage={getItem}\n            setItemInStorage={setItem}\n            clearStorageCache={clearCache}\n            removeItemFromStorage={removeItem}\n            token={token}\n          >\n            {(notificationsApi) => (\n              <WrappedComponent {...props} notificationsApi={notificationsApi} />\n            )}\n          </NotificationsProvider>\n        )}\n      </StorageProvider>\n    )}\n  </AuthConsumer>\n);\n\nexport {\n  NotificationsProvider,\n  withNotificationsProvider\n};\n","export const Filters = {\n  ALL: 'all',\n  REVIEW_REQUESTED: 'review_requested',\n  PARTICIPATING: 'participating',\n  SUBSCRIBED: 'subscribed',\n  COMMENT: 'comment'\n};\n","import React from 'react';\nimport styled from 'react-emotion';\n\nimport alarm from './svg/alarm.svg';\nimport allInbox from './svg/all_inbox.svg';\nimport back from './svg/back.svg';\nimport bolt from './svg/bolt.svg';\nimport boltWhite from './svg/bolt-white.svg';\nimport bookmarkAlt from './svg/bookmark-alt.svg';\nimport bookmarkAltWhite from './svg/bookmark-alt-white.svg';\nimport bookmark from './svg/bookmark.svg';\nimport bookmarks from './svg/bookmarks.svg';\nimport check from './svg/check.svg';\nimport clock from './svg/clock.svg';\nimport convo from './svg/convo.svg';\nimport doneAll from './svg/done-all.svg';\nimport done from './svg/done.svg';\nimport hot from './svg/hot.svg';\nimport help from './svg/help.svg';\nimport inbox from './svg/inbox.svg';\nimport info from './svg/info.svg';\nimport inboxWhite from './svg/inbox-white.svg';\nimport locked from './svg/locked.svg';\nimport lowPriority from './svg/low_priority.svg';\nimport menu from './svg/menu.svg';\nimport next from './svg/next.svg';\nimport people from './svg/people.svg';\nimport peopleWhite from './svg/people-white.svg';\nimport peopleAlt from './svg/people-alt.svg';\nimport peopleAltWhite from './svg/people-alt-white.svg';\nimport prev from './svg/prev.svg';\nimport refresh from './svg/refresh.svg';\nimport search from './svg/search.svg';\nimport settings from './svg/settings.svg';\nimport starAlt from './svg/star-alt.svg';\nimport star from './svg/star.svg';\nimport trash from './svg/trash.svg';\nimport timer from './svg/timer.svg';\nimport unlocked from './svg/unlocked.svg';\nimport undo from './svg/undo.svg';\nimport user from './svg/user.svg';\nimport x from './svg/x.svg';\n\nimport issue_closed from './svg/github/issue-closed.svg';\nimport issue_open from './svg/github/issue-open.svg';\nimport pr_closed from './svg/github/pr-closed.svg';\nimport pr_open from './svg/github/pr-open.svg';\nimport pr_merged from './svg/github/pr-merged.svg';\n\nconst SvgIcon = styled('div')({\n  position: 'relative',\n  backgroundSize: 'cover',\n  fontSize: 14,\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n}, ({size, icon, opacity, shrink}) => ({\n  height: size || 24,\n  width: size || 24,\n  background: `url(${icon}) center center no-repeat`,\n  opacity,\n  transform: shrink ? `scale(${shrink})` : 'inherit'\n}));\n\nexport default function Icon ({src, ...props}) {\n  return <SvgIcon {...props} icon={src}>&nbsp;</SvgIcon>\n}\n\nconst createIcon = src => props => <Icon {...props} src={src} />;\n\nIcon.Alarm = createIcon(alarm);\nIcon.AllInbox = createIcon(allInbox);\nIcon.Back = createIcon(back);\nIcon.Bolt = createIcon(bolt);\nIcon.BoltWhite = createIcon(boltWhite);\nIcon.BookmarkAlt = createIcon(bookmarkAlt);\nIcon.BookmarkAltWhite = createIcon(bookmarkAltWhite);\nIcon.Bookmark = createIcon(bookmark);\nIcon.Bookmarks = createIcon(bookmarks);\nIcon.Check = createIcon(check);\nIcon.Clock = createIcon(clock);\nIcon.Convo = createIcon(convo);\nIcon.DoneAll = createIcon(doneAll);\nIcon.Done = createIcon(done);\nIcon.Hot = createIcon(hot);\nIcon.Help = createIcon(help);\nIcon.Inbox = createIcon(inbox);\nIcon.Info = createIcon(info);\nIcon.InboxWhite = createIcon(inboxWhite);\nIcon.Locked = createIcon(locked);\nIcon.LowPriority = createIcon(lowPriority);\nIcon.Menu = createIcon(menu);\nIcon.Next = createIcon(next);\nIcon.People = createIcon(people);\nIcon.PeopleWhite = createIcon(peopleWhite);\nIcon.PeopleAlt = createIcon(peopleAlt);\nIcon.PeopleAltWhite = createIcon(peopleAltWhite);\nIcon.Prev = createIcon(prev);\nIcon.Refresh = createIcon(refresh);\nIcon.Search = createIcon(search);\nIcon.Settings = createIcon(settings);\nIcon.StarAlt = createIcon(starAlt);\nIcon.Star = createIcon(star);\nIcon.Trash = createIcon(trash);\nIcon.Timer = createIcon(timer);\nIcon.Unlocked = createIcon(unlocked);\nIcon.Undo = createIcon(undo);\nIcon.User = createIcon(user);\nIcon.X = createIcon(x);\n\nIcon.IssueClosed = createIcon(issue_closed);\nIcon.IssueOpen = createIcon(issue_open);\nIcon.PrClosed = createIcon(pr_closed);\nIcon.PrOpen = createIcon(pr_open);\nIcon.PrMerged = createIcon(pr_merged);\n","import React from 'react';\nimport loader from './loader.svg';\nimport loaderAlt from './loader-alt.svg';\nimport loaderWhite from './loader-white.svg';\n\nexport default function LoadingIcon ({ style, size, alt, white, ...props }) {\n  let url = loader;\n  if (white) {\n    url = loaderWhite;\n  } else if (alt) {\n    url = loaderAlt;\n  }\n\n  return (\n    <div style={{\n      background: `url(${(url)}) center center no-repeat`,\n      position: 'relative',\n      height: size || 100,\n      width: size || 100,\n      margin: '0 auto',\n      ...style\n    }} {...props} />\n  );\n}\n","import React from 'react';\n\nexport const withOnEnter = WrappedComponent => ({onEnter, ...props}) => (\n  <WrappedComponent\n    {...props}\n    onKeyPress={event => {\n      if (event.key === 'Enter') {\n        onEnter(event);\n      }\n    }}\n  />\n);\n\nclass Tooltip extends React.Component {\n  constructor (props) {\n    super(props);\n\n    this.id = ('tooltip-id-' + Math.random()).replace(/\\./g, '');\n  }\n\n  static defaultProps = {\n    tooltipOffsetX: 0,\n    tooltipOffsetY: 0\n  }\n\n  getTooltipElement = () => document.querySelector(`#${this.id}`);\n\n  onMouseEnter = event => {\n    if (this.getTooltipElement()) {\n      return;\n    }\n\n    const {tooltipOffsetX, tooltipOffsetY} = this.props;\n    const {x, y, height} = event.target.getBoundingClientRect();\n    const text = document.createTextNode(this.props.message);\n    const tooltipElement = document.createElement('div');\n\n    tooltipElement.setAttribute('id', this.id);\n    tooltipElement.setAttribute('class', 'react-tooltip');\n    tooltipElement.setAttribute(\n      'style',\n      `top: ${y + tooltipOffsetY}px; left: ${x + tooltipOffsetX}px;`\n    );\n    tooltipElement.appendChild(text);\n\n    document.querySelector('body').appendChild(tooltipElement);\n\n    this.timeout = setTimeout(() => {\n      tooltipElement.setAttribute(\n        'style',\n        `top: ${y + tooltipOffsetY}px; left: ${x + tooltipOffsetX}px; opacity: .83;`\n      );\n    }, 500);\n  }\n\n  onMouseLeave = () => {\n    clearTimeout(this.timeout);\n    const tooltipElement = this.getTooltipElement();\n    if (tooltipElement) {\n      tooltipElement.parentNode.removeChild(tooltipElement);\n    }\n  }\n\n  render () {\n    return this.props.children({\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave,\n    });\n  }\n}\n\nexport const withTooltip = WrappedComponent => ({tooltip, tooltipOffsetX, tooltipOffsetY, ...props}) => (\n  <Tooltip\n      message={tooltip}\n      tooltipOffsetX={tooltipOffsetX}\n      tooltipOffsetY={tooltipOffsetY}>\n    {mouseEvents => tooltip ? (\n      <WrappedComponent {...props} {...mouseEvents} />\n    ) : (\n      <WrappedComponent {...props} />\n    )}\n  </Tooltip>\n);\n","import React from 'react';\nimport moment from 'moment';\nimport {VictoryPie, VictoryChart} from \"victory\";\nimport {Link} from \"@reach/router\";\nimport styled from 'react-emotion';\nimport Icon from '../../components/Icon';\nimport Logo from '../../components/Logo';\nimport LoadingIcon from '../../components/LoadingIcon';\nimport {routes} from '../../constants';\nimport {Filters} from '../../constants/filters';\nimport {withOnEnter, withTooltip} from '../../enhance';\nimport {Status} from '../../constants/status';\nimport {Badges} from '../../constants/reasons';\nimport '../../styles/gradient.css';\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\n\nfunction getRelativeTime (time) {\n  const currentTime = moment();\n  const targetTime = moment(time);\n  const diffMinutes = currentTime.diff(targetTime, 'minutes');\n  if (diffMinutes < 1)\n    return 'Just now';\n  if (diffMinutes < 5)\n    return 'Few minutes ago';\n  if (diffMinutes < 60)\n    return diffMinutes + ' minutes ago';\n  if (diffMinutes < 60 * 24)\n    return Math.floor(diffMinutes / 60) + ' hours ago';\n\n  const diffDays = currentTime.diff(targetTime, 'days');\n  if (diffDays === 1)\n    return 'Yesterday';\n  if (diffDays <= 7)\n    return 'Last ' + targetTime.format('dddd');\n  // @TODO implement longer diffs\n  return 'Long time ago';\n}\n\nconst FixedContainer = styled('div')({\n  height: '80%',\n  maxWidth: 270,\n  display: 'block',\n  position: 'fixed'\n});\n\nconst InlineBlockContainer = styled('div')({\n  'div': {\n    display: 'inline-block'\n  }\n});\n\nconst NotificationsContainer = styled('div')({\n  position: 'relative',\n  background: '#fff',\n  margin: '0 auto',\n  padding: 0,\n  width: '100%',\n  height: '100%',\n  display: 'flex',\n  flexDirection: 'row',\n  overflowX: 'hidden',\n  boxSizing: 'border-box'\n});\n\nconst NavigationContainer = styled('div')({\n  position: 'fixed',\n  top: 0,\n  boxSizing: 'border-box',\n  margin: '0 auto',\n  width: '100%',\n  height: 60,\n  color: 'hsla(0,0%,100%,.75)',\n  paddingBottom: '12px',\n  paddingTop: '12px',\n  zIndex: '100',\n});\n\nconst GeneralOptionsContainer = styled(NavigationContainer)({\n  position: 'relative',\n  zIndex: '1',\n  height: 'initial',\n  minHeight: 60,\n  width: '95%',\n  margin: 0,\n  background: '#fff',\n  padding: '8px 16px',\n  paddingTop: 18,\n  flex: '0 0 50px',\n  'button': {\n    display: 'inline-flex',\n    margin: 0\n  }\n});\n\nconst Sidebar = styled('div')({\n  flex: '0 0 300px',\n  padding: '32px 20px',\n  paddingRight: 0,\n  display: 'flex',\n  justifyContent: 'center',\n});\n\nconst SidebarLink = styled('a')({}, ({active, color}) => ({\n  textAlign: 'left',\n  userSelect: 'none',\n  margin: '0 auto 5px',\n  position: 'relative',\n  cursor: 'pointer',\n  borderRadius: 4,\n  alignItems: 'center',\n  padding: '0 14px',\n  height: 40,\n  width: 200,\n  fontSize: '12px',\n  fontWeight: 600,\n  letterSpacing: 0.5,\n  textTransform: 'capitalize',\n  textDecoration: 'none',\n  transition: 'background 0.12s ease-in-out',\n  display: 'flex',\n  background: active ? color : 'none',\n  color: active ? '#fff' : '#202124',\n  ':before': {\n    content: '\"\"',\n    transition: 'all 150ms ease',\n    background: 'rgba(190, 197, 208, 0.25)',\n    borderRadius: 4,\n    display: 'block',\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n    position: 'absolute',\n    transform: 'scale(0)'\n  },\n  ':hover:before': {\n    transform: active ? 'scale(0)' : 'scale(1)',\n  },\n  ':active:before': {\n    background: 'rgba(190, 197, 208, 0.5)'\n  },\n  'div': {\n    marginRight: 5\n  }\n}));\n\nconst Notifications = styled('div')({\n  flex: 1,\n});\n\nconst NavTab = styled('a')({\n  position: 'relative',\n  textTransform: 'capitalize',\n  userSelect: 'none',\n  borderRadius: 4,\n  textDecoration: 'none',\n  fontWeight: '500',\n  fontSize: '14px',\n  textAlign: 'left',\n  opacity: 0.6,\n  padding: '20px 32px',\n  paddingLeft: '16px',\n  width: '150px',\n  display: 'inline-block',\n  margin: 0,\n  transition: 'all 150ms ease',\n  ':hover': {\n    background: 'rgba(190, 197, 208, 0.25)',\n  },\n}, ({ number }) => ({\n  ':after': number > 0 && {\n    content: `\"${number}\"`,\n    color: '#ffffff',\n    background: '#a8a8a9',\n    fontSize: '10px',\n    verticalAlign: 'text-top',\n    padding: '1px 8px',\n    borderRadius: '4px',\n    marginLeft: '6px',\n    display: 'inline-block',\n  }\n}), ({ active, color, number }) => active && ({\n  color,\n  opacity: 1,\n  ':before': {\n    content: '\"\"',\n    position: 'absolute',\n    background: color,\n    height: '3px',\n    width: '90%',\n    bottom: '0',\n    left: '5%',\n    borderTopLeftRadius: '4px',\n    borderTopRightRadius: '4px',\n  },\n  ':after': number > 0 && {\n    content: `\"${number}\"`,\n    color: '#ffffff',\n    background: color,\n    fontSize: '10px',\n    verticalAlign: 'text-top',\n    padding: '1px 8px',\n    borderRadius: '4px',\n    marginLeft: '6px',\n    display: 'inline-block',\n  }\n}));\n\nconst Tab = styled('button')({\n  position: 'relative',\n  userSelect: 'none',\n  cursor: 'pointer',\n  border: 0,\n  outline: 'none',\n  background: 'none',\n  height: 40,\n  width: 40,\n  borderRadius: '100%',\n  margin: '0 auto',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  ':before': {\n    content: \"''\",\n    transition: 'all 150ms ease',\n    background: 'rgba(190, 197, 208, 0.25)',\n    borderRadius: '100%',\n    display: 'block',\n    height: 40,\n    width: 40,\n    position: 'absolute',\n    transform: 'scale(0)'\n  },\n  ':hover:before': {\n    transform: 'scale(1)',\n  },\n  ':active:before': {\n    background: 'rgba(190, 197, 208, 0.5)'\n  }\n}, ({disabled}) => disabled && ({\n  background: 'none !important',\n  opacity: 0.35,\n  cursor: 'default',\n  ':hover:before': {\n    transform: 'scale(0) !important',\n  },\n  ':active:before': {\n    background: 'none !important'\n  }\n}));\n\nconst SearchField = styled('div')({\n  float: 'left',\n  textAlign: 'left',\n  width: '50%',\n  boxShadow: '0 4px 6px rgba(50,50,93,.11), 0 1px 3px rgba(0,0,0,.08)',\n  margin: '0 auto',\n  background: 'hsla(0,0%,100%,.125)',\n  borderRadius: '4px',\n  alignItems: 'center',\n  padding: 0,\n  height: '36px',\n  fontSize: '13px',\n  textDecoration: 'none',\n  transition: 'all 0.06s ease-in-out',\n  display: 'inline-flex',\n  ':focus-within': {\n    background: '#fff'\n  }\n});\n\nconst Message = styled('div')({\n  display: 'block',\n  textAlign: 'center',\n  marginTop: 24 * 5,\n  'p': {\n    paddingTop: 24,\n    userSelect: 'none',\n    display: 'block',\n    margin: 0\n  }\n});\n\nconst LoaderContainer = styled('div')({\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  height: '100%'\n});\n\nconst SearchInput = styled('input')({\n  flex: 1,\n  textAlign: 'left',\n  margin: '0 auto',\n  background: 'none',\n  padding: 0,\n  height: '36px',\n  color: '#fff',\n  fontSize: '13px',\n  textDecoration: 'none',\n  display: 'inline-flex',\n  border: '0',\n  outline: 'none',\n  ':focus': {\n    color: '#202124'\n  }\n});\nconst EnhancedSearchInput = withOnEnter(SearchInput);\n\nconst NotificationRow = styled('tr')({\n  position: 'relative',\n  display: 'flex',\n  alignItems: 'center',\n  textAlign: 'left',\n  width: '100%',\n  borderRadius: 4,\n  margin: '0 auto',\n  background: '#fff',\n  padding: '8px 16px',\n  transition: 'all 0.1s ease-in-out',\n  boxSizing: 'border-box',\n  ':hover': {\n    background: '#f9f9f9',\n    // boxShadow: '0 4px 6px rgba(50,50,93,.11), 0 1px 3px rgba(0,0,0,.08)',\n    zIndex: 10\n  }\n});\n\nconst NotificationTab = styled(Tab)({\n  display: 'inline-flex',\n  margin: 0,\n});\n\nconst Timestamp = styled('span')({\n  position: 'relative',\n  margin: 0,\n  marginLeft: 10,\n  fontSize: 11,\n  opacity: 0.5,\n});\n\nconst NotificationTitle = styled('span')({\n  position: 'relative',\n  display: 'block'\n}, ({img}) => img && ({\n  paddingLeft: 20,\n  '::before': {\n    content: '\"\"',\n    position: 'absolute',\n    display: 'block',\n    background: `url(${img}) center center no-repeat`,\n    backgroundSize: 'cover',\n    left: 0,\n    height: 20,\n    width: 20,\n  }\n}));\n\nconst Repository = styled('span')({\n  fontWeight: 500,\n  marginLeft: 10,\n  fontSize: 14\n});\n\nconst PRIssue = styled(Repository)({\n  fontWeight: 400,\n}, ({after}) => ({\n  ':after': {\n    content: `\"#${after}\"`,\n    fontSize: 13,\n    opacity: .3,\n    marginLeft: 5\n  }\n}));\n\nconst Table = styled('table')({\n  width: '96%',\n  minWidth: 970,\n  'td': {\n    display: 'inline-block'\n  }\n});\n\nconst TableItem = styled('td')({\n  whiteSpace: 'nowrap',\n  overflow: 'hidden',\n  textOverflow: 'ellipsis',\n}, ({width, flex}) => ({\n  width,\n  flex\n}));\n\nconst SmallLink = styled('a')({\n  display: 'block',\n  marginRight: 10,\n  cursor: 'pointer',\n  fontSize: 10,\n  lineHeight: '20px',\n  fontWeight: 400,\n  textDecoration: 'underline',\n  transition: 'all 0.12s ease-in-out',\n  ':hover': {\n    opacity: 0.75\n  }\n});\n\nconst EnhancedTab = withTooltip(Tab);\nconst EnhancedNavTab = withTooltip(NavTab);\nconst EnhancedNotificationTab = withTooltip(NotificationTab);\nconst EnhancedSidebarLink = withTooltip(SidebarLink);\nconst EnhancedIconHot = withTooltip(Icon.Hot);\nconst EnhancedIconTimer = withTooltip(Icon.Timer);\nconst EnhancedIconConvo = withTooltip(Icon.Convo);\n\nfunction getPRIssueIcon (type, reasons) {\n  const grow = 1.0;\n  switch (type) {\n    case 'PullRequest':\n      return (\n        <Icon.PrMerged shrink={grow} />\n      );\n    case 'Issue':\n      return (\n        <Icon.IssueOpen shrink={grow} />\n      );\n    default:\n      return null;\n  }\n}\n\nexport default function Scene ({\n  queuedCount,\n  stagedCount,\n  closedCount,\n  first,\n  last,\n  lastPage,\n  page,\n  notifications,\n  query,\n  activeStatus,\n  allNotificationsCount,\n  stagedTodayCount,\n  onChangePage,\n  onSetActiveStatus,\n  onClearQuery,\n  onLogout,\n  onSearch,\n  onMarkAsRead,\n  onFetchNotifications,\n  onRefreshNotifications,\n  onStageThread,\n  onRestoreThread,\n  isSearching,\n  isFetchingNotifications,\n  onClearCache,\n  fetchingNotificationsError,\n  activeFilter,\n  onSetActiveFilter,\n}) {\n  const loading = isSearching || isFetchingNotifications;\n  const isFirstPage = page === 1;\n  const isLastPage = page === lastPage;\n\n  console.warn('before render in scene', notifications)\n\n  return (\n    <div style={{marginTop: 60}}>\n      <NavigationContainer className=\"container-gradient\">\n        <div style={{\n          textAlign: 'right',\n          margin: '0 auto',\n          width: '92%'\n        }}>\n          <Logo\n            size={36}\n            style={{\n              float: 'left',\n              marginRight: 48,\n              cursor: 'pointer'\n            }}\n            onClick={() => {\n              onSetActiveStatus(Status.QUEUED);\n              onSetActiveFilter(Filters.PARTICIPATING);\n            }}\n          />\n          <SearchField>\n            <Icon.Search size={48} opacity={.45} />\n            <EnhancedSearchInput\n              disabled={loading}\n              type=\"text\"\n              placeholder=\"Search for notifications\"\n              onEnter={onSearch}\n            />\n            {isSearching && <LoadingIcon white={true} size={48} />}\n          </SearchField>\n          <div style={{display: 'inline-block'}} className=\"button-container-alt\">\n            <Link style={{\n              marginRight: 15,\n              background: 'none',\n              color: '#fff',\n              height: 36,\n              padding: '0 12px'\n            }} to={routes.HOME}>home</Link>\n          </div>\n          <div style={{display: 'inline-block'}}  className=\"button-container-alt\">\n            <a style={{\n              marginRight: 15,\n              background: 'none',\n              color: '#fff',\n              height: 36,\n              padding: '0 12px'\n            }} href=\"#\" onClick={onLogout}>sign out</a>\n          </div>\n        </div>\n      </NavigationContainer>\n      <div style={{\n        display: 'flex',\n        flexDirection: 'row'\n      }}>\n        <div style={{\n          flex: '0 0 300px'\n        }}>\n          <Sidebar>\n            <FixedContainer>\n              <div style={{\n                width: 220,\n                padding: '0 14px',\n                margin: '0 11px 12px',\n              }}>\n                <h3 style={{\n                  margin: 0\n                }}>\n                  <Icon.Clock style={{\n                    display: 'inline-block',\n                    verticalAlign: 'middle',\n                    marginRight: '5px',\n                    top: '-3px',\n                  }} />\n                  {moment().format('h:mma')}\n                </h3>\n                <span style={{\n                  display: 'block',\n                  padding: '6px 0px',\n                  fontSize: 15,\n                  opacity: 0.7,\n                }}>{moment().format('dddd, MMMM Do')}</span>\n                <span style={{\n                  display: 'block',\n                  padding: '6px 0 8px',\n                  fontSize: 12,\n                  opacity: 0.5,\n                }}>You've triaged {stagedTodayCount} notifications today</span>\n              </div>\n              {/*\n              We shouldn't show all the notificaitons. Pointless and creates more noise.\n\n              <SidebarLink\n                active={activeFilter === Filters.ALL}\n                color=\"#00A0F5\"\n                onClick={() => onSetActiveFilter(Filters.ALL)}>\n                {activeFilter === Filters.ALL ? (\n                  <Icon.InboxWhite shrink={.6} />\n                ) : (\n                  <Icon.Inbox shrink={.6} />\n                )}\n                all notifications\n              </SidebarLink>\n              */}\n              <EnhancedSidebarLink\n                tooltip=\"All the updates for issues and pull requests that are your responsibility to deal with\"\n                tooltipOffsetX={130}\n                active={activeFilter === Filters.PARTICIPATING}\n                color=\"#00d19a\"\n                onClick={() => onSetActiveFilter(Filters.PARTICIPATING)}>\n                {activeFilter === Filters.PARTICIPATING ? (\n                  <Icon.BoltWhite shrink={.6} />\n                ) : (\n                  <Icon.Bolt shrink={.6} />\n                )}\n                your updates\n              </EnhancedSidebarLink>\n              <EnhancedSidebarLink\n                tooltip=\"Updates for issues and pull requests that you have commented on\"\n                tooltipOffsetX={100}\n                active={activeFilter === Filters.COMMENT}\n                color=\"#00A0F5\"\n                onClick={() => onSetActiveFilter(Filters.COMMENT)}>\n                {activeFilter === Filters.COMMENT ? (\n                  <Icon.PeopleAltWhite shrink={.6} />\n                ) : (\n                  <Icon.PeopleAlt shrink={.6} />\n                )}\n                participating\n              </EnhancedSidebarLink>\n              <div style={{\n                padding: 14,\n                margin: 21,\n                background: '#f5f5f5',\n                borderRadius: 4,\n                height: 100,\n                fontSize: 12\n              }}>\n                bar chart, statistics, etc\n              </div>\n              <div style={{\n                padding: 14,\n                margin: 21,\n              }}>\n                <SmallLink target=\"_blank\" href=\"https://github.com/nickzuber/meteorite/issues\">Report bugs</SmallLink>\n                <SmallLink target=\"_blank\" href=\"https://github.com/nickzuber/meteorite/issues\">Submit feedback</SmallLink>\n                <SmallLink target=\"_blank\" href=\"https://github.com/nickzuber/meteorite\">See source code</SmallLink>\n              </div>\n            </FixedContainer>\n          </Sidebar>\n        </div>\n        <div style={{\n          flex: 1\n        }}>\n          <GeneralOptionsContainer>\n            <EnhancedTab tooltip={!loading ? \"Refresh your notifications\" : null} disabled={loading}>\n              <Icon.Refresh\n                opacity={0.9}\n                onClick={!loading ? (() => onFetchNotifications()) : undefined}\n              />\n            </EnhancedTab>\n            <EnhancedTab tooltip={!loading ? \"Delete all of your notifications from the cache\" : null} disabled={loading}>\n              <Icon.Trash\n                opacity={0.9}\n                onClick={!loading ? (() => {\n                  const response = window.confirm('Are you sure you want to clear the cache?');\n                  if (response) {\n                    onClearCache();\n                  }\n                }) : undefined}\n              />\n            </EnhancedTab>\n            {query ? (\n              <React.Fragment>\n                <div style={{display: 'inline-block'}}  className=\"button-container-alt\">\n                  <a style={{\n                    background: 'none',\n                    color: '#202124',\n                    textTransform: 'inherit',\n                    boxShadow: '0 0 0',\n                    fontWeight: 400,\n                    height: 36,\n                    padding: '0 12px',\n                  }}\n                  >\n                    Showing results for '{query}'\n                  </a>\n                </div>\n                <EnhancedTab disabled={loading}>\n                  <Icon.X\n                    opacity={0.9}\n                    onClick={!loading ? (() => onClearQuery()) : undefined}\n                  />\n                </EnhancedTab>\n              </React.Fragment>\n            ) : null}\n            <div style={{float: 'right'}}>\n              <div style={{display: 'inline-block'}}  className=\"button-container-alt\">\n                <a style={{\n                  marginRight: 15,\n                  background: 'none',\n                  color: '#202124',\n                  textTransform: 'inherit',\n                  boxShadow: '0 0 0',\n                  fontWeight: 400,\n                  height: 36,\n                  padding: '0 12px',\n                }}>\n                  {first}-{last} of about {allNotificationsCount}\n                </a>\n              </div>\n              <EnhancedTab disabled={loading || isFirstPage}>\n                <Icon.Prev\n                  opacity={0.9}\n                  onClick={!loading && !isFirstPage ? (() => onChangePage(page - 1)) : undefined}\n                />\n              </EnhancedTab>\n              <EnhancedTab disabled={loading || isLastPage}>\n                <Icon.Next\n                  opacity={0.9}\n                  onClick={!loading && !isLastPage ? (() => onChangePage(page + 1)) : undefined}\n                />\n              </EnhancedTab>\n            </div>\n          </GeneralOptionsContainer>\n          <GeneralOptionsContainer style={{paddingTop: 4}}>\n            <EnhancedNavTab\n              tooltip=\"New updates that you haven't dealt with yet\"\n              tooltipOffsetX={55}\n              number={queuedCount}\n              color=\"#00d19a\"\n              active={activeStatus === Status.QUEUED}\n              onClick={() => onSetActiveStatus(Status.QUEUED)}\n              href=\"javascript:void(0);\">\n              Unread\n            </EnhancedNavTab>\n            <EnhancedNavTab\n              tooltip=\"Notifications that you've seen, clicked on, or otherwise have handled\"\n              tooltipOffsetX={55}\n              number={stagedCount}\n              color=\"#009ef8\"\n              active={activeStatus === Status.STAGED}\n              onClick={() => onSetActiveStatus(Status.STAGED)}\n              href=\"javascript:void(0);\">\n              Read\n            </EnhancedNavTab>\n            <EnhancedNavTab\n              tooltip=\"Stale and old notifications that are considered closed out and finished\"\n              tooltipOffsetX={55}\n              number={closedCount}\n              color=\"#f12c3f\"\n              active={activeStatus === Status.CLOSED}\n              onClick={() => onSetActiveStatus(Status.CLOSED)}\n              href=\"javascript:void(0);\">\n              Resolved\n            </EnhancedNavTab>\n          </GeneralOptionsContainer>\n          <NotificationsContainer>\n          <Notifications>\n            {isFetchingNotifications ? (\n              <LoaderContainer>\n                <LoadingIcon />\n              </LoaderContainer>\n            ) : notifications.length <= 0 ? (\n              <Message>\n                <p style={{\n                  fontSize: 16,\n                  fontWeight: 400,\n                }}>\n                  No {activeStatus.toLowerCase()} notifications</p>\n                <p style={{\n                  fontSize: 12,\n                  fontWeight: 400,\n                  color: '#5f6368'\n                }}>\n                  <span role=\"img\" aria-label=\"hooray\">🎉</span> You're all set here for the moment</p>\n              </Message>\n            ) : (\n              <Table>\n                <tbody style={{\n                  display: 'flex',\n                  flexDirection: 'column'\n                }}>\n                  {notifications.map(n => (\n                    <NotificationRow key={n.id}>\n                      <TableItem>\n                        <div style={{ float: 'left', marginTop: 2 }}>\n                          {getPRIssueIcon(n.type, n.reasons)}\n                        </div>\n                      </TableItem>\n                      <TableItem\n                        style={{height: 36, cursor: 'pointer', userSelect: 'none'}}\n                        width={400}\n                        flex={.65}\n                        onClick={() => {\n                          window.open(n.url);\n                          onStageThread(n.id, n.repository)\n                        }}>\n                        <NotificationTitle>\n                          <PRIssue after={n.number}>{n.name}</PRIssue>\n                        </NotificationTitle>\n                        <Timestamp>\n                          {getRelativeTime(n.updated_at)}\n                          {n.isAuthor && (\n                            <Icon.User\n                              shrink={0.5}\n                              style={{\n                                display: 'inline-block',\n                                top: -3\n                              }}\n                            />\n                          )}\n                        </Timestamp>\n                      </TableItem>\n                      <TableItem width={100}>\n                        <InlineBlockContainer>\n                          {n.badges.map(badge => {\n                            switch (badge) {\n                              case Badges.HOT:\n                                // lots of `reasons` within short time frame\n                                return (\n                                  <EnhancedIconHot\n                                    tooltip=\"Lots of recent activity\"\n                                    tooltipOffsetX={-15}\n                                    tooltipOffsetY={-10}\n                                    shrink={0.75}\n                                  />\n                                );\n                              case Badges.OLD:\n                                // old\n                                return (\n                                  <EnhancedIconTimer\n                                    tooltip=\"Old pull request that needs your review\"\n                                    tooltipOffsetX={-15}\n                                    tooltipOffsetY={-10}\n                                    shrink={0.75}\n                                  />\n                                );\n                              case Badges.COMMENTS:\n                                // lots of `reasons`\n                                return (\n                                  <EnhancedIconConvo\n                                    tooltip=\"Very talkative thread\"\n                                    tooltipOffsetX={-15}\n                                    tooltipOffsetY={-10}\n                                    shrink={0.75}\n                                  />\n                                );\n                              default:\n                                return null;\n                            }\n                          })}\n                        </InlineBlockContainer>\n                      </TableItem>\n                      <TableItem width={250} flex={.35}>\n                        <Repository\n                          onClick={() => window.open(n.repositoryUrl)}\n                          style={{cursor: 'pointer', userSelect: 'none'}}>\n                          {n.repository}</Repository>\n                      </TableItem>\n                      <TableItem width={150} style={{textAlign: 'right'}}>\n                        <EnhancedNotificationTab>\n                          {n.score}\n                        </EnhancedNotificationTab>\n                        {activeStatus === Status.QUEUED ? (\n                          <EnhancedNotificationTab tooltip={!loading ? \"Mark as read\" : null}>\n                            <Icon.Check\n                              opacity={0.9}\n                              onClick={!loading ? (() => onStageThread(n.id, n.repository)) : undefined}\n                            />\n                          </EnhancedNotificationTab>\n                        ) : (\n                          <EnhancedNotificationTab tooltip={!loading ? \"Revert back to unread\" : null}>\n                            <Icon.Undo\n                              opacity={0.9}\n                              onClick={!loading ? (() => onRestoreThread(n.id)) : undefined}\n                            />\n                          </EnhancedNotificationTab>\n                        )}\n                        {activeStatus === Status.CLOSED ? (\n                          <EnhancedNotificationTab>\n                            <Icon.Help\n                              shrink={0.8}\n                              opacity={0.9}\n                              onClick={!loading ? (() => {}) : undefined}\n                            />\n                            </EnhancedNotificationTab>\n                          ) : (\n                          <EnhancedNotificationTab tooltip={!loading ? \"Mark as resolved\" : null}>\n                            <Icon.X\n                              opacity={0.9}\n                              onClick={!loading ? (() => onMarkAsRead(n.id)) : undefined}\n                            />\n                          </EnhancedNotificationTab>\n                        )}\n                      </TableItem>\n                    </NotificationRow>\n                  ))}\n                </tbody>\n              </Table>\n            )}\n          </Notifications>\n        </NotificationsContainer>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport moment from 'moment';\nimport { Redirect } from \"@reach/router\";\nimport { compose } from 'recompose';\nimport { withNotificationsProvider } from '../../providers/Notifications';\nimport { withAuthProvider } from '../../providers/Auth';\nimport { withCookiesProvider } from '../../providers/Cookies';\nimport { withStorageProvider } from '../../providers/Storage';\nimport { OAUTH_TOKEN_COOKIE } from '../../constants/cookies';\nimport { routes } from '../../constants';\nimport { Filters } from '../../constants/filters';\nimport { Status } from '../../constants/status';\nimport { Reasons, Badges } from '../../constants/reasons';\nimport Scene from './SceneAlt';\n\nconst PER_PAGE = 15;\n\n// @TODO Move these functions.\n\n/**\n * Given a notification, give it a score based on its importance.\n *\n * There are some interesting workarounds that go into this algorithm to account\n * for GitHub's broken notifications API -- but we will get to that later. First,\n * let's start off with the basics of scoring.\n *\n * There are a few \"reasons\" that we can be getting a notification, each having\n * an initial weight of importance:\n *\n *  - MENTION           ->  8\n *  - ASSIGN            ->  14\n *  - REVIEW_REQUESTED  ->  30\n *  - SUBSCRIBED        ->  3\n *  - COMMENT           ->  3\n *  - AUTHOR            ->  10\n *  - OTHER             ->  2\n *\n * There are some rules that go to giving out these scores, primarily being the\n * first time we see one of these unique reasons, we award the notification with\n * the respective score, but a reason that transitions into itself will be awarded\n * a degraded score of min(ceil(n/3), 2). For example:\n *\n *  - null, MENTION, MENTION -> 0, 8, 3\n *  - null, ASSIGN, ASSIGN, REVIEW_REQUESTED, -> 0, 14, 5, 20\n *  - null, SUBSCRIBED, SUBSCRIBED, SUBSCRIBED -> 0, 3, 2, 2\n *\n * @param {Object} notification Some notification to score.\n * @return {number} The score.\n */\nfunction scoreOf (notification) {\n  const {reasons} = notification;\n  let score = 0;\n  let prevReason = null;\n  for (let i = 0; i < reasons.length; i++) {\n    const reason = reasons[i].reason;\n    console.log(reason)\n    if (prevReason && reason === prevReason) {\n      const degradedScore = Math.ceil(scoreOfReason[reason] / 3);\n      score += Math.max(degradedScore, 2);\n    } else {\n      score += scoreOfReason[reason];\n    }\n    prevReason = reason;\n  }\n  return score;\n};\n\n// @TODO implement this\nfunction badgesOf (notification) {\n  const badges = [];\n  const len = notification.reasons.length;\n  const timeSinceLastUpdate = moment().diff(moment(notification.reasons[len - 1].time), 'minutes');\n\n  // If there are more than 4 reasons, and the last 4 reasons have happened within\n  // an hour of each other. The last update should be within the past 30 minutes.\n  // The specific time frame and reasons count is subject to change.\n  if (len >= 4 && timeSinceLastUpdate < 30) {\n    const oldestReference = moment(notification.reasons[len - 4].time);\n    const newestReference = moment(notification.reasons[len - 1].time);\n    if (newestReference.diff(oldestReference, 'hours') <= 1) {\n      badges.push(Badges.HOT);\n    }\n  }\n  // If there's a lot of activity going on within the thread in general.\n  // The specific nunmber should be relative to average number of thread lengths.\n  // We can track a running statistic as we see notifications update.\n  if (len > 6) {\n    badges.push(Badges.COMMENTS);\n  }\n  // If you've been tagged in for review and the most recent update happened over\n  // 4 hours ago, that specific time is subject to change.\n  if (notification.reasons.some(r => r.reason === Reasons.REVIEW_REQUESTED) &&\n      timeSinceLastUpdate > 60 * 4) {\n    badges.push(Badges.OLD);\n  }\n  return badges;\n};\n\nconst scoreOfReason = {\n  [Reasons.ASSIGN]: 18,\n  [Reasons.AUTHOR]: 10,\n  [Reasons.MENTION]: 12,\n  [Reasons.OTHER]: 2,\n  [Reasons.REVIEW_REQUESTED]: 30,\n  [Reasons.SUBSCRIBED]: 3,\n  [Reasons.COMMENT]: 6,\n};\n\nconst decorateWithScore = notification => ({\n  ...notification,\n  score: scoreOf(notification),\n  badges: badgesOf(notification)\n});\n\nclass NotificationsPage extends React.Component {\n  state = {\n    isSearching: false,\n    query: null,\n    activeFilter: Filters.PARTICIPATING,\n    activeStatus: Status.QUEUED,\n    currentPage: 1\n  }\n\n  componentDidMount () {\n    this.syncer = setInterval(() => {\n      console.warn('sync');\n      this.props.notificationsApi.fetchNotificationsSync();\n    }, 8 * 1000);\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.syncer);\n  }\n\n  onChangePage = page => {\n    this.setState({ currentPage: page });\n  }\n\n  onSetActiveFilter = filter => {\n    this.setState({ activeFilter: filter, currentPage: 1 });\n  }\n\n  onSetActiveStatus = status => {\n    this.setState({ activeStatus: status, currentPage: 1 });\n  }\n\n  onClearQuery = () => {\n    this.setState({ query: null });\n  }\n\n  onLogout = () => {\n    // Remove cookie and invalidate token on client.\n    this.props.cookiesApi.removeCookie(OAUTH_TOKEN_COOKIE);\n    this.props.authApi.invalidateToken();\n  }\n\n  onSearch = event => {\n    const text = event.target.value;\n\n    // Ignore empty queries.\n    if (text.length <= 0) {\n      return;\n    }\n\n    this.setState({ isSearching: true });\n    setTimeout(() => {\n      this.setState({\n        query: text,\n        isSearching: false\n       });\n    }, 500);\n  }\n\n  enhancedOnStageThread = (thread_id, repository) => {\n    console.warn('staging thread', thread_id, 'in repo', repository);\n    this.props.storageApi.incrStat('stagedCount');\n    this.props.storageApi.incrStat(repository + '-stagedCount');\n    this.props.notificationsApi.stageThread(thread_id);\n  }\n\n  restoreThread = thread_id => {\n    console.warn('restoring thread');\n    this.props.notificationsApi.restoreThread(thread_id);\n  }\n\n  render () {\n    if (!this.props.authApi.token) {\n      return <Redirect noThrow to={routes.LOGIN} />\n    }\n\n    const {\n      fetchNotifications,\n      markAsRead,\n      clearCache,\n      notifications,\n      loading: isFetchingNotifications,\n      error: fetchingNotificationsError,\n    } = this.props.notificationsApi;\n\n    // @TODO Move all this out of the render method.\n    let filterMethod = () => true;\n    switch (this.state.activeFilter) {\n      case Filters.PARTICIPATING:\n        filterMethod = n => (\n          n.reasons.some(({ reason }) => (\n            reason === 'review_requested' ||\n            reason === 'assign' ||\n            reason === 'mention' ||\n            reason === 'author'\n          ))\n        );\n        break;\n      case Filters.COMMENT:\n        filterMethod = n => (\n          n.reasons.some(({ reason }) => reason === 'comment')\n        );\n        break;\n      default:\n        filterMethod = () => true;\n    }\n\n    const filteredNotifications = notifications.filter(filterMethod);\n\n    const notificationsQueued = filteredNotifications.filter(n => n.status === Status.QUEUED);\n    const notificationsStaged = filteredNotifications.filter(n => n.status === Status.STAGED);\n    const notificationsClosed = filteredNotifications.filter(n => n.status === Status.CLOSED);\n\n    let notificationsToRender = [];\n    switch (this.state.activeStatus) {\n      case Status.CLOSED:\n        notificationsToRender = notificationsClosed;\n        break;\n      case Status.STAGED:\n        notificationsToRender = notificationsStaged;\n        break;\n      case Status.QUEUED:\n      default:\n        notificationsToRender = notificationsQueued;\n    }\n\n    let scoredAndSortedNotifications = notificationsToRender\n      .map(decorateWithScore)\n      .sort((a, b) => b.score - a.score);\n\n    // We gotta make sure to search notifications before we paginate.\n    // Otherwise we'd just end up searching on the current page, which is bad.\n    if (this.state.query) {\n      scoredAndSortedNotifications = scoredAndSortedNotifications.filter(n => (\n        n.name.toLowerCase().indexOf(this.state.query.toLowerCase()) > -1)\n      )\n    }\n\n    let firstIndex = (this.state.currentPage - 1) * PER_PAGE;\n    let lastIndex = (this.state.currentPage * PER_PAGE);\n    let notificationsOnPage = scoredAndSortedNotifications.slice(firstIndex, lastIndex);\n    let lastPage = Math.ceil(scoredAndSortedNotifications.length / PER_PAGE);\n    let firstNumbered = firstIndex + 1;\n    let lastNumbered = Math.min(lastIndex, scoredAndSortedNotifications.length);\n\n    if (scoredAndSortedNotifications.length === 0) {\n      firstIndex = 0;\n      lastIndex = 0;\n      notificationsOnPage = [];\n      lastPage = 1;\n      firstNumbered = 0;\n      lastNumbered = 0;\n    }\n\n    const stagedTodayCount = this.props.storageApi.getStat('stagedCount')[0];\n\n    return (\n      <Scene\n        queuedCount={notificationsQueued.length}\n        stagedCount={notificationsStaged.length}\n        closedCount={notificationsClosed.length}\n        stagedTodayCount={stagedTodayCount || 0}\n        first={firstNumbered}\n        last={lastNumbered}\n        lastPage={lastPage}\n        allNotificationsCount={scoredAndSortedNotifications.length}\n        notifications={notificationsOnPage}\n        query={this.state.query}\n        page={this.state.currentPage}\n        activeStatus={this.state.activeStatus}\n        activeFilter={this.state.activeFilter}\n        onChangePage={this.onChangePage}\n        onLogout={this.onLogout}\n        onSetActiveStatus={this.onSetActiveStatus}\n        onSearch={this.onSearch}\n        onClearQuery={this.onClearQuery}\n        onFetchNotifications={fetchNotifications}\n        onMarkAsRead={markAsRead}\n        onClearCache={clearCache}\n        onStageThread={this.enhancedOnStageThread}\n        onRestoreThread={this.restoreThread}\n        onRefreshNotifications={this.props.storageApi.refreshNotifications}\n        isSearching={this.state.isSearching}\n        isFetchingNotifications={isFetchingNotifications}\n        fetchingNotificationsError={fetchingNotificationsError}\n        onSetActiveFilter={this.onSetActiveFilter}\n      />\n    );\n  }\n};\n\nconst enhance = compose(\n  withStorageProvider,\n  withAuthProvider,\n  withCookiesProvider,\n  withNotificationsProvider\n);\n\nexport default enhance(NotificationsPage);\n","import React from 'react';\nimport qs from 'query-string';\n\nexport default class TokenHandler extends React.Component {\n  componentDidMount() {\n    const params = qs.parse(document.location.search);\n    const code = params.code;\n    if (code) {\n      this.props.onSetLoading(true);\n      fetch(`https://meteorite-gatekeeper.herokuapp.com/authenticate/${code}`)\n        .then(response => response.json())\n        .then(({ token, error }) => {\n          this.props.onSetLoading(false);\n          if (error) {\n            this.props.onSetError(true);\n          } else {\n            this.props.setToken(token);\n          }\n        });\n    }\n  }\n\n  render () {\n    return null;\n  }\n}\n","import React from 'react';\n\nconst CLIENT_ID = '9478c90e57ef3d546ef0';\nconst REDIRECT_URI = 'http://localhost:9008/login';\nconst SCOPES = 'notifications';\n\nconst AuthenticationButton = props => (\n  <a\n    href={`https://github.com/login/oauth/authorize?client_id=${CLIENT_ID}&scope=${SCOPES}&redirect_uri=${REDIRECT_URI}`}\n    {...props}\n  >\n    Authorize with GitHub\n  </a>\n);\n\nexport default AuthenticationButton;\n","import React from 'react';\nimport styled from 'react-emotion';\n\nconst Message = styled('p')({\n  color: '#eb3349',\n  fontWeight: 500\n});\n\nexport default function ErrorMessage ({children, props}) {\n  return (\n    <Message {...props}>{children}</Message>\n  );\n}\n","import React from 'react';\nimport { Link } from \"@reach/router\";\nimport styled from 'react-emotion';\nimport { routes } from '../../constants';\nimport { AuthenticationButton } from '../../components/buttons';\nimport LoadingIcon from '../../components/LoadingIcon';\nimport ErrorMessage from '../../components/ErrorMessage';\nimport '../../styles/gradient.css';\n\nconst Container = styled('div')({\n  position: 'relative',\n  background: '#fff',\n  borderRadius: 4,\n  margin: '0 auto',\n  padding: '24px 48px 76px',\n  width: 300,\n  boxShadow: '0 50px 100px rgba(50,50,93,.1), 0 15px 35px rgba(50,50,93,.15), 0 5px 15px rgba(0,0,0,.1)'\n});\n\nconst ButtonsContainer = styled('div')({\n  display: 'flex',\n  justifyContent: 'space-between',\n  position: 'absolute',\n  bottom: 24,\n  left: 48,\n  right: 48,\n  'a': {\n    margin: 0\n  }\n});\n\nexport default function Scene ({ loading, error, loggedOut, ...props }) {\n  return (\n    <div className=\"container-gradient\" style={{\n      width: '100%',\n      position: 'relative',\n      flexDirection: 'column',\n      height: '100vh',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    }}>\n      <Container>\n        <h3>Authenticate with GitHub</h3>\n        {error ? (\n          <React.Fragment>\n            <p>Log in with GitHub and we'll start organizing and sorting all of your notifications.</p>\n            <ErrorMessage>Oops, looks like something went wrong. Try again?</ErrorMessage>\n            <ButtonsContainer>\n              <div className=\"button-container-alt\">\n                <Link style={{boxShadow: '0 0 0'}} to={routes.HOME}>go back</Link>\n              </div>\n              <div className=\"button-container-alt\">\n                <AuthenticationButton style={{boxShadow: '0 0 0'}} />\n              </div>\n            </ButtonsContainer>\n          </React.Fragment>\n        ) : loading ? (\n          <LoadingIcon style={{marginTop: 50}} />\n        ) : loggedOut ? (\n          <React.Fragment>\n            <p>Log in with GitHub and we'll start organizing and sorting all of your notifications.</p>\n            <ButtonsContainer>\n              <div className=\"button-container-alt\">\n                <Link style={{boxShadow: '0 0 0'}} to={routes.HOME}>go back</Link>\n              </div>\n              <div className=\"button-container-alt\">\n                <AuthenticationButton style={{boxShadow: '0 0 0'}} />\n              </div>\n            </ButtonsContainer>\n          </React.Fragment>\n        ) : (\n          <span>logged in!</span>\n        )}\n      </Container>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Redirect } from '@reach/router';\nimport { compose } from 'recompose';\nimport { withAuthProvider } from '../../providers/Auth';\nimport { withNotificationsProvider } from '../../providers/Notifications';\nimport { withCookiesProvider } from '../../providers/Cookies';\nimport TokenHandler from './TokenHandler';\nimport Scene from './Scene';\nimport { routes } from '../../constants';\n\nclass LoginPage extends React.Component {\n  state = {\n    loading: false,\n    error: null\n  }\n\n  onSetLoading = loading => {\n    this.setState({ loading });\n  }\n\n  onSetError = error => {\n    this.setState({ error });\n  }\n\n  render () {\n    if (this.props.authApi.token) {\n      return <Redirect noThrow to={routes.NOTIFICATIONS} />\n    }\n\n    return (\n      <React.Fragment>\n        <TokenHandler\n          setToken={this.props.authApi.setToken}\n          onSetLoading={this.onSetLoading}\n          onSetError={this.onSetError}\n        />\n        <Scene\n          loading={this.state.loading}\n          error={this.state.error}\n          loggedOut={!this.props.authApi.token}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nconst enhance = compose(\n  withAuthProvider,\n  withNotificationsProvider,\n  withCookiesProvider\n);\n\nexport default enhance(LoginPage);\n","import React, { Component } from 'react';\nimport { Router } from \"@reach/router\";\nimport { routes } from './constants';\nimport { AuthProvider } from './providers/Auth';\nimport {\n  Home,\n  Login,\n  Notifications,\n} from './pages';\n\nclass App extends Component {\n  render() {\n    return (\n      <AuthProvider>\n        <Router>\n          <Home path={routes.HOME} />\n          <Login path={routes.LOGIN} />\n          <Notifications path={routes.NOTIFICATIONS} />\n        </Router>\n      </AuthProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}